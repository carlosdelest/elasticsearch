"Always return a fixed license" :
  - do:
      license.get: { }

  ## a v5 license object has 12 attributes & the Rest API always outputs in current version
  - length: { license: 12 }
  - match: { license.type: "enterprise" }
  - match: { license.status: "active" }
  - match: { license.uid: "d85d2c6a-b96d-3cc6-96db-5571a789b156" }
  - match: { license.issue_date: "1970-01-01T00:00:00.000Z" }
  - match: { license.expiry_date: "2100-01-01T00:00:00.000Z" }
  - match: { license.max_resource_units: 100000 }
  - match: { license.issued_to: "Elastic Serverless" }
  - match: { license.issuer: "Elastic" }
---
"Attempts to install a license fails":
  # note - this API should be disabled in a future version and return a 404 instead of 500
  - do:
      catch: gone
      license.post:
        acknowledge: true
        body: |
          {"licenses":[{"uid":"894371dc-9t49-4997-93cb-8o2e3r7fa6a8","type":"trial","issue_date_in_millis":1411948800000,"expiry_date_in_millis":1916956799999,"max_nodes":1,"issued_to":"issuedTo","issuer":"issuer","signature":"AAAAAgAAAA0FWh0T9njItjQ2qammAAABmC9ZN0hjZDBGYnVyRXpCOW5Bb3FjZDAxOWpSbTVoMVZwUzRxVk1PSmkxakxZdW5IMlhlTHNoN1N2MXMvRFk4d3JTZEx3R3RRZ0pzU3lobWJKZnQvSEFva0ppTHBkWkprZWZSQi9iNmRQNkw1SlpLN0lDalZCS095MXRGN1lIZlpYcVVTTnFrcTE2dzhJZmZrdFQrN3JQeGwxb0U0MXZ0dDJHSERiZTVLOHNzSDByWnpoZEphZHBEZjUrTVBxRENNSXNsWWJjZllaODdzVmEzUjNiWktNWGM5TUhQV2plaUo4Q1JOUml4MXNuL0pSOEhQaVB2azhmUk9QVzhFeTFoM1Q0RnJXSG53MWk2K055c28zSmRnVkF1b2JSQkFLV2VXUmVHNDZ2R3o2VE1qbVNQS2lxOHN5bUErZlNIWkZSVmZIWEtaSU9wTTJENDVvT1NCYklacUYyK2FwRW9xa0t6dldMbmMzSGtQc3FWOTgzZ3ZUcXMvQkt2RUZwMFJnZzlvL2d2bDRWUzh6UG5pdENGWFRreXNKNkE9PQAAAQBZhvozA0trrxhUZ1QbaTsKTna9C5KVQ6pv8yg1pnsBpZXCl8kX1SrgoFn1bXq61IvJwfw5qnmYNiH3hRhTO9EyaCBqaLk8NXZQ6TrRkQSpEnnBwAYUkZeKXsIuBoOk4B4mzwC/r8aMAkzrTiEBtBbog+57cSaU9y37Gkdd+1jXCQrxP+jOEUf7gnXWZvE6oeRroLvCt1fYn09k0CF8kKTbrPTSjC6igZR3uvTHyee74XQ9PRavvHax73T4UOEdQZX/P1ibSQIWKbBRD5YQ1POYVjTayoltTnWLMxfEcAkkATJZLhpBEHST7kZWjrTS6J1dCReJc7a8Vsj/78HXvOIy"}]}
---
"Attempts to delete a license fails":
  # note - this API should be disabled in a future version and return a 404 instead of 500
  - do:
      catch: gone
      license.delete: {}
---
"Attempts to start a basic license fails":
  # note - this API should be disabled in a future version and return a 404 instead of 500
  - do:
      catch: gone
      license.post_start_basic: {}
---
"Attempts to start a trial license fails":
  # note - this API should be disabled in a future version and return a 404 instead of 500
  - do:
      catch: gone
      license.post_start_trial: {}
---
"Not eligible to start trial":
  - do:
      catch: gone
      license.get_trial_status: {}


